@model User

<link rel="stylesheet" href="~/css/styles.css" />

<h2>Crear Usuario</h2>

<form asp-action="Crear" onsubmit="return validarFormulario()">
    <div class="form-group">
        <label for="Nombre">Nombre</label>
        <input asp-for="Nombre" class="form-control" required pattern="[A-Za-z\s]+" title="Solo letras y espacios permitidos." />
        <span class="text-danger" asp-validation-for="Nombre"></span>
    </div>
    <div class="form-group">
        <label for="Apellido">Apellido</label>
        <input asp-for="Apellido" class="form-control" required pattern="[A-Za-z\s]+" title="Solo letras y espacios permitidos." />
        <span class="text-danger" asp-validation-for="Apellido"></span>
    </div>
    <div class="form-group">
        <label for="DNI">DNI</label>
        <input asp-for="DNI" class="form-control" required pattern="\d{8}" title="Debe contener 8 dígitos numéricos." />
        <span class="text-danger" asp-validation-for="DNI"></span>
    </div>
    <button type="submit" class="btn btn-primary" style="margin-right: 10px;">Crear</button>
    <a href="/Users/Index" class="btn btn-secondary">Cancelar</a>
</form>

<script>
    function validarFormulario() {
        let nombre = document.querySelector('[asp-for="Nombre"]').value;
        let apellido = document.querySelector('[asp-for="Apellido"]').value;
        let dni = document.querySelector('[asp-for="DNI"]').value;
        let valid = true;

        if (!nombre.match(/^[A-Za-z\s]+$/)) {
            document.getElementById('errorNombre').innerText = 'El nombre solo debe contener letras y espacios.';
            valid = false;
        } else {
            document.getElementById('errorNombre').innerText = '';
        }

        if (!apellido.match(/^[A-Za-z\s]+$/)) {
            document.getElementById('errorApellido').innerText = 'El apellido solo debe contener letras y espacios.';
            valid = false;
        } else {
            document.getElementById('errorApellido').innerText = '';
        }

        if (!dni.match(/^\d{8}$/)) {
            document.getElementById('errorDNI').innerText = 'El DNI debe tener 8 dígitos.';
            valid = false;
        } else {
            document.getElementById('errorDNI').innerText = '';
        }

        return valid;
    }
</script>
